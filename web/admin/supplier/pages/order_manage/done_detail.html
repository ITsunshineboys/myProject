<link rel="stylesheet" href="pages/order_manage/css/done_detail.css">
<div ng-controller="done_detail_ctrl">
    <section>
        <div class="order_detail">
            <h3>订单详情</h3>

            <!--订单号-->
            <div class="order_num">
                <span>订单号</span>
                <span ng-bind="order_no"></span>
            </div>

            <!--订单状态-->
            <div class="order_state">
                <span>订单状态</span>
                <span ng-bind="order_detail.status"></span>
            </div>

            <!--用户-->
            <div class="user">
                <span>用户</span>
                <span ng-bind="order_detail.username"></span>
            </div>


            <!--订单金额-->
            <div class="order_money">
                <span>订单金额</span>
                <ul>
                    <li>总金额</li>
                    <li ng-bind="order_detail.role"></li>
                    <li>运费</li>
                </ul>

                <ul>
                    <li id="total">{{order_detail.amount_order | currency:"¥"}}</li>
                    <li>{{order_detail.goods_price | currency:"¥"}}</li>
                    <li>{{order_detail.freight | currency:"¥"}}</li>
                </ul>
            </div>

            <!--供货价-->
            <div class="supplier_money">
                <span>供货价</span>
                <span>{{order_detail.supplier_price | currency:"¥"}}</span>
            </div>

            <!--供货价-->
            <div class="market_money">
                <span>市场价</span>
                <span>{{order_detail.market_price | currency:"¥"}}</span>
            </div>

            <!--商品个数-->
            <div class="order_state">
                <span>商品个数</span>
                <span ng-bind="order_detail.goods_number"></span>
            </div>

            <!--付款方式-->
            <div class="order_state">
                <span>付款方式</span>
                <span ng-bind="order_detail.pay_name"></span>
            </div>

            <!--下单时间-->
            <div class="order_state">
                <span>下单时间</span>
                <span ng-bind="order_detail.create_time"></span>
            </div>

            <!--付款时间-->
            <div class="order_state">
                <span>付款时间</span>
                <span ng-bind="order_detail.paytime"></span>
            </div>

            <!--完成时间-->
            <div class="order_state">
                <span>完成时间</span>
                <span ng-bind="order_detail.complete_time"></span>
            </div>

            <!--配送方式-->
            <div class="order_state">
                <span>配送方式</span>
                <span class="text_blue" ui-sref="express({express_params})" ng-bind="order_detail.shipping_way"></span>
            </div>


        </div>
        <hr>

        <!-----商品详情----->
        <div class="good_detail">
            <h3>商品详情</h3>
            <button class="view_good" ui-sref="record_goods_detail({express_params})">
                <span class="glyphicon glyphicon-eye-open"></span>
                查看商品
            </button>


            <!--商品名称-->
            <div class="order_state">
                <span>商品名称</span>
                <span ng-bind="goods_value.goods_name"></span>
            </div>

            <!--商品编号-->
            <div class="order_state">
                <span>商品编号</span>
                <span ng-bind="sku"></span>
            </div>

            <!--商品属性-->
            <div class="order_state">
                <span>商品属性</span>

                <ul class="good_attr">
                    <li ng-repeat="item in goods_value.attr">
                        <span ng-bind="item.name"></span>
                        <span ng-bind="item.value"></span>
                    </li>
                </ul>
            </div>
        </div>
        <hr/>

        <!---收货详情---->
        <div class="order_detail">
            <h3>收货详情</h3>

            <!--收货人-->
            <div class="market_money">
                <span>收货人</span>
                <span ng-bind="receive_details.consignee"></span>
            </div>

            <!--收货地址-->
            <div class="order_state">
                <span>收货地址</span>
                <span ng-bind="receive_details.district"></span>
            </div>

            <!--电话-->
            <div class="phonenum">
                <span>电话</span>
                <span ng-bind="receive_details.consignee_mobile"></span>
            </div>

            <!--留言-->
            <div class="phonenum">
                <span>留言</span>
                <span ng-bind="receive_details.buyer_message"></span>
            </div>

            <!--发票类型-->
            <div class="order_state">
                <span>发票类型</span>
                <span ng-bind="receive_details.invoice_header_type"></span>
            </div>

            <!--抬头-->
            <div class="phonenum">
                <span>抬头</span>
                <span ng-bind="receive_details.invoice_header"></span>
            </div>

            <!--纳税人识别码-->
            <div class="udid">
                <span>纳税人识别码</span>
                <span ng-bind="receive_details.invoicer_card"></span>
            </div>

            <!--发票内容-->
            <div class="order_state">
                <span>发票内容</span>
                <span ng-bind="receive_details.invoice_content">明细</span>
            </div>
        </div>
        <hr/>

        <!--异常记录-待发货-->
        <div class='order_manage' ng-if="show_abnormal&&unshipped">
            <h3 class="abnormal_title">异常记录-待发货</h3>
            <span class="glyphicon glyphicon-chevron-down arrows" ng-show="send" ng-click="abnormal('send')"></span>
            <span class="glyphicon glyphicon-chevron-up arrows" ng-show="!send" ng-click="abnormal('send')"></span>
            <ul class="abnormal_waitsend" ng-show="send">
                <li ng-repeat="item in unshipped_detail">
                    <span ng-bind="item.type"></span>
                    <span ng-bind="item.value"></span>
                    <span ng-bind="item.time"></span>
                    <p ng-bind="item.content"></p>
                </li>
            </ul>
        </div>

        <!--异常记录-待收货-->
        <div class='order_manage abnormal' ng-if="show_abnormal&&unreceived">
            <h3 class="abnormal_title">异常记录-待收货</h3>
            <span class="glyphicon glyphicon-chevron-down arrows" ng-show="receive"
                  ng-click="abnormal('receive')"></span>
            <span class="glyphicon glyphicon-chevron-up arrows" ng-show="!receive"
                  ng-click="abnormal('receive')"></span>
            <ul class="abnormal_waitsend" ng-show="receive">
                <li ng-repeat="item in unreceived_detail">
                    <span ng-bind="item.type"></span>
                    <span ng-bind="item.value"></span>
                    <span ng-bind="item.time"></span>
                    <p ng-bind="item.content"></p>
                </li>
            </ul>
        </div>
        <hr ng-if="show_abnormal"/>

        <!--评论回复-->
        <div class="order_detail" ng-if="showcomment">
            <h3>评论详情</h3>

            <div class="comment">
                <span>顾客评论</span>
                <span>{{comment.name}}：{{comment.content}}</span>
            </div>

            <div class="comment_pic">
                <img ng-src="{{baseUrl+'/'+item.image}}" alt="" ng-repeat="item in comment.image" data-toggle="modal" data-target="#myModal" ng-click="showImgs(item.image)">

            </div>

            <ul class="good_score">
                <li class="score_head">
                    <span>商品评分</span>
                    <span ng-bind="comment.score"></span>
                </li>
                <li class="starlist">
                    <span>店家服务</span>
                    <ul class="stars">
                        <span class="glyphicon glyphicon-star" ng-repeat="item in store_service_score_arr track by $index"></span>
                    </ul>
                </li>
                <li class="starlist">
                    <span>物流速度</span>
                    <ul class="stars">
                        <span class="glyphicon glyphicon-star" ng-repeat="item in logistics_speed_score_arr track by $index"></span>
                    </ul>
                </li>
                <li class="starlist">
                    <span>配送人员服务</span>
                    <ul class="stars express_service">
                        <span class="glyphicon glyphicon-star"  ng-repeat="item in shipping_score_arr track by $index"></span>
                    </ul>
                </li>
            </ul>

        </div>

        <!--店家回复-->
        <div class="order_state store_reply" ng-if="showcomment">
            <span>店家回复</span>
            <div class="reply_text" ng-if="!show_storecomment">
                <textarea name="text" id="text" cols="90" rows="10" ng-model="sp.textcount" maxlength=70 ng-class={border_warning:emptywarning} ng-change="checkEmpty()"></textarea>
                <span id="textcount"><span ng-bind="sp.textcount.length"></span>/70</span>
            </div>

            <p ng-if="show_storecomment" ng-bind="comment.reply"></p>
        </div>

        <div class="btn_group">
            <button class="btn btn-primary pull-left" type="submit" data-toggle="modal" data-target={{savemodal}} ng-if="showbtn" ng-click="saveStoreComment()">保存
            </button>
            <button class="btn btn-default" id="back" ui-sref="order_manage({tabflag:tabflag})">返回</button>

        </div>

    </section>

    <div class="modal customer_modal detail_modal fade" id="send_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">提示</h4>
                </div>
                <div class="modal-body body_font">
                    <div>
                        <span>保存成功</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal">确认</button>
                </div>
            </div>
        </div>
    </div>


    <!-- 图片浏览模态框 -->
    <div id="myModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-img" role="document">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">							<span aria-hidden="true">&times;</span>
                    </button>
                    <img ng-src="{{showImg}}">
                </div>
            </div>
        </div>
    </div>
</div>