<link rel="stylesheet" href="pages/order_manage/css/order_manage_index.css">
<div ng-controller="ordermanage_ctrl">
    <!--顶部导航-->
    <header>
        <div>
            <i class="glyphicon glyphicon-home"></i>
            <span class="order_manage" ng-click="tabFunc('all_flag')">订单管理</span>
            <img src="lib/images/user.png" alt=""/>
        </div>
    </header>

    <!--选项卡-->
    <section>
        <div class="tab">
            <ul>
                <li ng-class="{'tab_blue':all_flag}"  ng-click="tabFunc('all_flag')">全部</li>
                <li ng-class="{'tab_blue':waitpay_flag}" ng-click="tabFunc('waitpay_flag')">待付款</li>
                <li ng-class="{'tab_blue':waitsend_flag}" ng-click="tabFunc('waitsend_flag')">待发货{{waitsend_list.length}}</li>
                <li ng-class="{'tab_blue':waitreceive_flag}" ng-click="tabFunc('waitreceive_flag')">待收货{{wait_receive_list.length}}</li>
                <li ng-class="{'tab_blue':finish_flag}" ng-click="tabFunc('finish_flag')">已完成</li>
                <li ng-class="{'tab_blue':cancel_flag}" ng-click="tabFunc('cancel_flag')">已取消</li>
            </ul>
        </div>

        <!--待发货-->
        <div role="tabpanel" class="tab-pane  active" id="tab_one" ng-if="waitsend_flag">
            <div class="all_choose">
                <select  name="province" ng-model="wjparams.time_type" ng-change="wait_send_type()" class="time_choose" ng-options="item.value as item.name for item in time">
                </select>
                <input ng-if="wjparams.time_type=='custom'" id="start_time"  ng-model="wjparams.start_time" max-date="{{wjparams.end_time}}"  ng-change="wait_send_change_time()" ngc-lay-date  class="time_interval" type="text" placeholder="开始时间">
                <input ng-if="wjparams.time_type=='custom'" id="stop_time"   ng-model="wjparams.end_time"  min-date="{{wjparams.start_time}}" ng-change="wait_send_change_time()" ngc-lay-date  class="time_interval" type="text"  placeholder="结束时间">
                <!--Menu-->
                <div class="tab_tools clearfix btn_menu_right">
                    <div class="pull-right">
                        <!-- 筛选菜单 -->
                        <div class="btn-group">
                            <span class="btn btn-default dropdown-toggle btn_list" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="glyphicon glyphicon-th-list"></i></span>
                            <!--Menu-->
                            <ul class="dropdown-menu dropdown-menu-right btn_list_menu">
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_1" ng-click="waitsend_all(waitsend_1)">订单编号</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_2" ng-click="waitsend_all(waitsend_2)">商品编号</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_3" ng-click="waitsend_all(waitsend_3)">商品名称</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_4" ng-click="waitsend_all(waitsend_4)">订单金额</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_5" ng-click="waitsend_all(waitsend_5)">下单时间</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_6" ng-click="waitsend_all(waitsend_6)">用户</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_7" ng-click="waitsend_all(waitsend_7)">绑定手机</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_8" ng-click="waitsend_all(waitsend_8)">订单状态</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_9" ng-click="waitsend_all(waitsend_9)">异常</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_10" ng-click="waitsend_all(waitsend_10)">评论</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_11" ng-click="waitsend_all(waitsend_11)">详情</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitsend_12" ng-click="waitsend_all(waitsend_12)">操作</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="float: right">
                    <div class="searchbox">
                        <input type="text" ng-model="myng.w_search" placeholder="搜索订单号或商品名称">
                        <span class="glyphicon glyphicon-search search"></span>
                    </div>
                    <button style="margin-right: 30px" ng-click="wait_send_search_btn()">搜索</button>
                </div>
            </div>

            <table>
                <tr>
                    <td ng-if="waitsend_1">订单编号</td>
                    <td ng-if="waitsend_2">商品编号</td>
                    <td ng-if="waitsend_3">商品名称</td>
                    <td ng-if="waitsend_4">订单金额<img ng-src="{{sort_money_img}}" ng-click="sort_money_click()"  class="sortpic"></td>
                    <td ng-if="waitsend_5">下单时间<img ng-src="{{sort_time_img}}" ng-click="sort_time_click()"  class="sortpic"></td>
                    <td ng-if="waitsend_6">用户</td>
                    <td ng-if="waitsend_7">绑定手机</td>
                    <td ng-if="waitsend_8">订单状态</td>
                    <td ng-if="waitsend_9">异常</td>
                    <td ng-if="waitsend_10">评论</td>
                    <td ng-if="waitsend_11">详情</td>
                    <td ng-if="waitsend_12">操作</td>
                </tr>
                <tr class="table_content" ng-repeat="item in waitsend_list">
                    <td ng-if="waitsend_1">{{item.order_no}}</td>
                    <td ng-if="waitsend_2">{{item.sku}}</td>
                    <td ng-if="waitsend_3">{{item.goods_name}}</td>
                    <td ng-if="waitsend_4">{{item.amount_order}}</td>
                    <td ng-if="waitsend_5">{{item.create_time}}</td>
                    <td ng-if="waitsend_6">{{item.user_name}}</td>
                    <td ng-if="waitsend_7">{{item.mobile}}</td>
                    <td ng-if="waitsend_8">{{item.status}}</td>
                    <td ng-if="waitsend_9" ng-show="item.unusual !='无异常'" style="color: #FF5722">{{item.unusual}}</td>
                    <td ng-if="waitsend_9" ng-show="item.unusual=='无异常'">&nbsp;</td>
                    <td ng-if="waitsend_10">{{item.comment_grade}}</td>
                    <td ng-if="waitsend_11" class="font_blue" ng-click="wait_send_detail(item.order_no,item.sku)">查看</td>
                    <td ng-if="waitsend_12" ng-show="item.unusual != '无异常'">&nbsp;</td>
                    <td ng-if="waitsend_12" ng-show="item.unusual=='无异常'" class="font_blue"  ng-click="wait_send_ship(item.shipping_type,item.order_no,item.sku)">发货</td>
                </tr>
            </table>
            <!--分页-->
            <tm-pagination conf="wjConfig"></tm-pagination>
        </div>
        <!--确认发货模态框-->
        <div class="modal customer_modal fade" id="wait_send_confirm_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body body_font">
                        <span>是否确认发货</span>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" data-dismiss="modal" ng-click="ship_confirm_btn()">确认</button>
                        <button class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>
        <!--快递单号发货模态框-->
        <div class="modal customer_modal fade" id="track_confirm_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">发货操作</h4>
                    </div>
                    <div class="modal-body body_font">
                        <p class='track_p' ng-if='track_flag'>{{track_font}}</p>
                        <div>
                            <span class='track_span'>*</span>
                            <span class='track_span'>快递单号</span>
                            <input type="text" class="delivery_input" ng-model="delivery_input_model">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary"  ng-click='track_confirm_btn()'>确认</button>
                        <button class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>
        <!--待收货-->
        <div role="tabpanel" class="tab-pane  active" ng-if="waitreceive_flag">
            <div class="all_choose">
                <select  name="province" ng-model="wjparams.time_type" ng-change="wait_send_type()" class="time_choose" ng-options="item.value as item.name for item in time">
                </select>
                <input ng-if="wjparams.time_type=='custom'" id='wait_receive_begin_time' ng-model="wjparams.start_time" max-date="{{wjparams.end_time}}" ng-change="wait_send_change_time()" ngc-lay-date  class="time_interval" type="text" placeholder="开始时间">
                <input ng-if="wjparams.time_type=='custom'" id='wait_receive_end_time'  ng-model="wjparams.end_time"  min-date="{{wjparams.start_time}}" ng-change="wait_send_change_time()" ngc-lay-date  class="time_interval" type="text"  placeholder="结束时间">
                <!--Menu-->
                <div class="tab_tools clearfix btn_menu_right">
                    <div class="pull-right">
                        <!-- 筛选菜单 -->
                        <div class="btn-group">
                            <span class="btn btn-default dropdown-toggle btn_list" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="glyphicon glyphicon-th-list"></i></span>
                            <!--Menu-->
                            <ul class="dropdown-menu dropdown-menu-right btn_list_menu">
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_1" ng-click="waitsend_all(waitreceive_1)">订单编号</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_2" ng-click="waitsend_all(waitreceive_2)">商品编号</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_3" ng-click="waitsend_all(waitreceive_3)">商品名称</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_4" ng-click="waitsend_all(waitreceive_4)">订单金额</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_5" ng-click="waitsend_all(waitreceive_5)">下单时间</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_6" ng-click="waitsend_all(waitreceive_6)">用户</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_7" ng-click="waitsend_all(waitreceive_7)">绑定手机</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_8" ng-click="waitsend_all(waitreceive_8)">订单状态</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_9" ng-click="waitsend_all(waitreceive_9)">异常</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_10" ng-click="waitsend_all(waitreceive_10)">评论</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_11" ng-click="waitsend_all(waitreceive_11)">详情</li>
                                <li><input type="checkbox" class="right_input" ng-model="waitreceive_12" ng-click="waitsend_all(waitreceive_12)">操作</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="float: right">
                    <div class="searchbox">
                        <input type="text" ng-model="myng.w_search" placeholder="搜索订单号或商品名称">
                        <span class="glyphicon glyphicon-search search"></span>
                    </div>
                    <button style="margin-right: 30px" ng-click="wait_send_search_btn()">搜索</button>
                </div>
            </div>

            <table>
                <tr>
                    <td ng-if="waitreceive_1">订单编号</td>
                    <td ng-if="waitreceive_2">商品编号</td>
                    <td ng-if="waitreceive_3">商品名称</td>
                    <td ng-if="waitreceive_4">订单金额<img ng-src="{{sort_money_img}}" ng-click="sort_money_click()"  class="sortpic"></td>
                    <td ng-if="waitreceive_5">下单时间<img ng-src="{{sort_time_img}}" ng-click="sort_time_click()"  class="sortpic" ></td>
                    <td ng-if="waitreceive_6">用户</td>
                    <td ng-if="waitreceive_7">绑定手机</td>
                    <td ng-if="waitreceive_8">订单状态</td>
                    <td ng-if="waitreceive_9">异常</td>
                    <td ng-if="waitreceive_10">评论</td>
                    <td ng-if="waitreceive_11">详情</td>
                    <td ng-if="waitreceive_12">操作</td>
                </tr>
                <tr class="table_content" ng-repeat="item in wait_receive_list">
                    <td ng-if="waitreceive_1">{{item.order_no}}</td>
                    <td ng-if="waitreceive_2">{{item.sku}}</td>
                    <td ng-if="waitreceive_3">{{item.goods_name}}</td>
                    <td ng-if="waitreceive_4">{{item.amount_order}}</td>
                    <td ng-if="waitreceive_5">{{item.create_time}}</td>
                    <td ng-if="waitreceive_6">{{item.user_name}}</td>
                    <td ng-if="waitreceive_7">{{item.mobile}}</td>
                    <td ng-if="waitreceive_8">{{item.status}}</td>
                    <td ng-if="waitreceive_9" ng-show="item.unusual!='无异常'" style="color: #FF5722">{{item.unusual}}</td>
                    <td ng-if="waitreceive_9" ng-show="item.unusual=='无异常'">&nbsp;</td>
                    <td ng-if="waitreceive_10">{{item.comment_grade}}</td>
                    <td ng-if="waitreceive_11" class="font_blue" ng-click="wait_send_detail(item.order_no,item.sku,'wait_receive')">查看</td>
                    <td ng-if="waitreceive_12">&nbsp;</td>
                </tr>
            </table>
            <!--分页-->
            <tm-pagination conf="wjConfig"></tm-pagination>
        </div>
    </section>
</div>