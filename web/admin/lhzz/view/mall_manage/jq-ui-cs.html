<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div ng-controller="sortCtrl">
    <ul ui-sortable="sortableOptions" ng-model="data">
        <li ng-repeat="item in data ">
            <span>{{item.name}}, {{item.age}}</span>
        </li>
    </ul>
</div>
<script src="../../../../js/jquery.js"></script>
<script src="../../js/jquery_ui/jquery-ui.min.js"></script>
<script src="../../../../js/angular.js"></script>
<!--<script src="ui-sortable/src/sortable.js"></script>-->
<script>
    angular.module("app", ["ui.sortable"])
            .controller("sortCtrl", function($scope, $timeout) {
                $scope.cannotSort = false;
                $scope.data = [{
                    "name": "allen",
                    "age": 21,
                    "i": 0
                }, {
                    "name": "bob",
                    "age": 18,
                    "i": 1
                }, {
                    "name": "curry",
                    "age": 25,
                    "i": 2
                }, {
                    "name": "david",
                    "age": 30,
                    "i": 3
                }];

                $scope.sortableOptions = {
                    // 数据有变化
                    update: function(e, ui) {
                        console.log("update");
                        //需要使用延时方法，否则会输出原始数据的顺序，可能是BUG？
                        $timeout(function() {
                            var resArr = [];
                            for (var i = 0; i < $scope.data.length; i++) {
                                resArr.push($scope.data[i].i);
                            }
                            console.log(resArr);
                        })


                    },

                    // 完成拖拽动作
                    stop: function(e, ui) {
                        //do nothing
                    }
                }
            })
</script>
</body>
</html>