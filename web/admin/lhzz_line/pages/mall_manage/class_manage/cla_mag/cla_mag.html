<link rel="stylesheet" href="pages/mall_manage/class_manage/cla_mag/css/cla_mag.css">
<div ng-controller="cla_mag_tabbar">
    <!--顶部导航-->
    <div class="cla_mag_topnav">
        <span class="glyphicon glyphicon-certificate"></span>
        <h6>商城管理 ></h6>
        <h6>分类管理</h6>
    </div>

    <div class="cla_mag_tabbar">
        <div class="cla_mag_tabtitle">
            <span id="onsale_tab" ng-click="changeToonsale()" ng-class="{clickstyle:showonsale}">已上架</span>
            <span id="offsale_tab" ng-click="changeTooffsale()" ng-class="{clickstyle:showoffsale}">已下架</span>
        </div>

        <!--已上架-->
        <div class="on_sale" id="on_sale" ng-show="showonsale">
            <!--上架菜单按钮组-->
            <div class="cla_mag_btngroup">
                <button class="chooseall_btn" ng-modal="selectAll"  ng-click="all(selectAll)">全选</button>
                <button class="xiajia_btn" data-toggle="modal" data-target="#piliangxiajia_modal" ng-click="piliangxiajia()">下架</button>
                <span class="fenleichoose_span">分类选择</span>
                <!--/*分类选择一级下拉框*/-->
                <select name=""  class="fenleichoose" ng-model="firstselect" ng-options="item.id as item.title for item in firstclass" ng-change="subClass(firstselect)"></select>
                <!--/*分类选择二级菜单*/-->
                <select name="" class="cailiaochoose" ng-show="firstselect=='0'?false:true" ng-options="item.id as item.title for item in secondclass" ng-model="secselect"></select>

                <button class="chaxun" ng-click="chaxun()">查询</button>
            </div>

            <!--已上架Table内容-->
            <div class="onsale_table">
                <table>
                    <tr class="th">
                        <td>&nbsp;</td>
                        <td>所属分类</td>
                        <td>分类图片</td>
                        <td>分类名称</td>
                        <td>分类级别</td>
                        <td class="sort">
                            上架时间
                            <img src="pages/mall_manage/class_manage/cla_mag/images/arrow_up.png" alt="" ng-show="ascorder" ng-click="changepic()">
                            <img src="pages/mall_manage/class_manage/cla_mag/images/arrow_down.png" alt="" ng-show="desorder" ng-click="changepictwo()">
                        </td>
                        <td>添加人员</td>
                        <td>状态</td>
                        <td>详情</td>
                        <td>操作</td>
                    </tr>

                    <tr ng-repeat="item in allonsalepro">
                        <td><input type="checkbox" ng-checked="selectAll" ng-model="item.state"></td>
                        <td>{{item.parent_title}}</td>
                        <td><img src="http://test.cdlhzz.cn:888/{{item.icon}}"></td>
                        <td>{{item.title}}</td>
                        <td>{{item.level}}</td>
                        <td>{{item.online_time}}</td>
                        <td>{{item.applicant}}</td>
                        <td class="yesGreen">{{item.status}}</td>
                        <td class="edit" ui-sref="onsale_edit({classtitle:item.title,classid:item.id,classlevel:item.level,classtitles:item.titles,classpath:item.path,iconpath:item.icon,addperson:item.applicant,online_time:item.online_time})" ng-click="onlineEdit(item.id,item.level)">编辑</td>
                        <td class="xiajia" data-toggle="modal" data-target="#xiajia_modal" ng-click="tobeoffline(item.id,item.level)">下架</td>
                    </tr>
                </table>
                <!--上架分页-->
                <ul class="pages">
                    <li ng-click="Previous()">上一页</li>
                        <li class="pagenum"  ng-repeat="page in pageList" ng-click="choosePage(page)" ng-class="{active:isActivePage(page)}">{{page}}</li>
                        <li id="omit" ng-show="allpages>5">...</li>
                        <li ng-if="allpages>5" ng-click="choosePage(allpages)" ng-class="{active:isActivePage(allpages)}">{{allpages}}</li>
                    <li ng-click="Next()">下一页</li>
                    <li id="jumpto"><input type="text" ng-model="topage"></li>
                    <li ng-click="choosePage(topage)">跳转</li>
                </ul>
            </div>
        </div>
        <!--已下架--------------------------------------------------------------->
        <div class="off_sale" id="off_sale" ng-show="showoffsale">
            <div class="cla_mag_btngroup">
                <button id="add" ui-sref="add_class">
                    <span class="glyphicon glyphicon-plus"></span>
                    <span>添加</span>
                </button>
                <button class="chooseall_btn" ng-modal="selectoffAll"  ng-click="alloff(selectoffAll)">全选</button>
                <button class="xiajia_btn" data-toggle="modal" data-target="#piliangshangjia_modal" ng-click="piliangshangjia()">上架</button>
                <span class="fenleichoose_span">分类选择</span>
                <!--/*分类选择一级下拉框*/-->
                <select name=""  class="fenleichoose" ng-model="firstselect" ng-options="item.id as item.title for item in firstclass" ng-change="subClass(firstselect)"></select>
                <!--/*分类选择二级菜单*/-->
                <select name="" class="cailiaochoose" ng-show="firstselect=='0'?false:true" ng-options="item.id as item.title for item in secondclass" ng-model="secselect"></select>
                <button class="chaxun" ng-click="offchaxun()">查询</button>
            </div>

            <!--下架Table内容-->
            <div class="onsale_table offsale_table">
                <table>
                    <tr class="th">
                        <td>&nbsp;</td>
                        <td>所属分类</td>
                        <td>分类图片</td>
                        <td>分类名称</td>
                        <td>分类级别</td>
                        <td class="sort">
                            下架时间
                            <img src="pages/mall_manage/class_manage/cla_mag/images/arrow_up.png" alt="" ng-show="offascorder" ng-click="offchangepic()">
                            <img src="pages/mall_manage/class_manage/cla_mag/images/arrow_down.png" alt="" ng-show="offdesorder" ng-click="offchangepictwo()">
                        </td>
                        <td>操作人员</td>
                        <td>状态</td>
                        <td>下架原因</td>
                        <td>详情</td>
                        <td>操作</td>
                    </tr>
                    <tr ng-repeat="item in alloffsalepro">
                        <td><input type="checkbox" ng-checked="selectoffAll" ng-model="item.state"></td>
                        <td>{{item.parent_title}}</td>
                        <td><img src="http://test.cdlhzz.cn:888/{{item.icon}}" alt=""></td>
                        <td>{{item.title}}</td>
                        <td>{{item.level}}</td>
                        <td>{{item.offline_time}}</td>
                        <td>{{item.applicant}}</td>
                        <td class="yesred">{{item.status}}</td>
                        <td id="dianji_shuru" data-toggle="modal" data-target="#shuru_modal" ng-click="resetOffReason(item.id,item.offline_reason)">点击输入</td>
                        <td class="edit" ui-sref="offsale_edit({classtitle:item.title,classid:item.id,classlevel:item.level,classtitles:item.titles,classpath:item.path,iconpath:item.icon,addperson:item.applicant,offline_time:item.offline_time})">编辑</td>
                        <td class="shangjia" data-toggle="modal" data-target="#shangjia_modal" ng-click="tobeonline(item.id,item.level)">上架</td>
                    </tr>
                </table>

                <ul class="pages">
                    <li ng-click="offPrevious()">上一页</li>
                    <li class="pagenum"  ng-repeat="page in offpageList" ng-click="chooseOffPage(page)" ng-class="{active:isOffActivePage(page)}">{{page}}</li>
                    <li id="offomit" ng-show="alloffpages>5">...</li>
                    <li ng-if="alloffpages>5" ng-click="chooseOffPage(alloffpages)" ng-class="{active:isOffActivePage(alloffpages)}">{{alloffpages}}</li>
                    <li ng-click="offNext()">下一页</li>
                    <li id="offjumpto"><input type="text" ng-model="tooffpage"></li>
                    <li ng-click="chooseOffPage(tooffpage)">跳转</li>
                </ul>

            </div>
            <!--下架table结束-->
        </div>
    </div>

    <!--已上架 单个下架 模态框-->
    <div class="modal fade" id="xiajia_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" id="xiajia_content">
                <div class="modal-header" id="xiajia_header">
                    <h4 class="modal-title" id="xiajiacaozuo">
                        下架操作
                    </h4>
                </div>
                <div class="modal-body" id="xiajia_body">
                    <h6 id="xiajia_fenlei">下架
                       1个分类
                    </h6>
                    <h6 id="xiajia_reason">下架原因（选填）</h6>
                    <textarea name="" id="xiajia_textarea" cols="43" rows="14"
                              placeholder="请填写下架原因，如选择多个则为批量备注" ng-model="offlinereason"></textarea>
                </div>

                <div class="btn_modal">
                    <button id="cancel" data-dismiss="modal" ng-click="canceloffline()">取消</button>
                    <button id="sure" data-dismiss="modal" ng-click="sureoffline()">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!--已上架 批量下架 模态框-->
    <div class="modal fade" id="piliangxiajia_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" id="piliangxiajia_content">
                <div class="modal-header" id="piliangxiajia_header">
                    <h4 class="modal-title" id="piliangxiajiacaozuo">
                        下架操作
                    </h4>
                </div>
                <div class="modal-body" id="piliangxiajia_body">
                    <h6 id="piliangxiajia_fenlei">下架
                        {{xiajiaarr.length}}个分类
                    </h6>
                    <h6 id="piliangxiajia_reason">下架原因（选填）</h6>
                    <textarea name="" id="piliangxiajia_textarea" cols="43" rows="14"
                              placeholder="请填写下架原因，如选择多个则为批量备注" ng-model="piliangofflinereason"></textarea>
                </div>

                <div class="btn_modal">
                    <button id="piliang_cancel" data-dismiss="modal" ng-click="cancelplliangoffline()">取消</button>
                    <button id="piliang_sure" data-dismiss="modal" ng-click="surepiliangoffline()">确认</button>
                </div>
            </div>
        </div>
    </div>


    <!--已下架 单个上架 模态框-->
    <div class="modal fade" id="shangjia_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" id="caozuo_content">
                <div class="modal-header" id="caozuo_header">
                    <h4 class="modal-title" id="caozuo_shangjia">
                        提示
                    </h4>
                </div>
                <div class="modal-body" id="caozuo_body">
                    <h6 id="shangjia_makesure">上架1个分类，是否确认上架</h6>
                </div>

                <div class="btn_modal_two">
                    <button data-dismiss="modal" id="caozuo_sure"  ng-click="sureonline()">确认</button>
                </div>
            </div>
        </div>
    </div>


    <!--已下架 批量上架 模态框-->
    <div class="modal fade" id="piliangshangjia_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" id="sjcaozuo_content">
                <div class="modal-header" id="sjcaozuo_header">
                    <h4 class="modal-title" id="sjcaozuo_shangjia">
                        提示
                    </h4>
                </div>
                <div class="modal-body" id="sjcaozuo_body">
                    <h6>上架{{shangjiaarr.length}}个分类，是否确认上架</h6>
                </div>

                <div class="btn_modal_two">
                    <button data-dismiss="modal" id="sjcaozuo_cancel" ng-click="cancelplliangonline()">取消</button>
                    <button data-dismiss="modal" id="sjcaozuo_sure" ng-click="surepiliangonline()">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!--已下架 下架原因模态框-->
    <div class="modal fade" id="shuru_modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" id="shuru_content">
                <div class="modal-header" id="shuru_header">
                    <h4 class="modal-title" id="shurucaozuo">
                        下架原因
                    </h4>
                </div>
                <div class="modal-body" id="shuru_body">
                    <h6 id="shuru_reason">下架原因（选填）</h6>
                    <textarea name="" id="shuru_textarea" cols="50" rows="14"
                              placeholder={{offline_reason==''?'请填写下架原因，如选择多个则为批量备注':''}} ng-model="xiajiareason"></textarea>
                </div>

                <div class="btn_modal">
                    <button data-dismiss="modal" id="shuru_cancel" ng-click="cancelReset()">取消</button>
                    <button data-dismiss="modal" id="shuru_sure" ng-click="surereset()">确认</button>
                </div>
            </div>
        </div>
    </div>


</div>
