<link rel="stylesheet" href="pages/mall_manage/style_manage/style_index/css/style_index.css">
<div ng-controller="style_index">
    <!--顶部导航-->
    <div class="topnav">
        <span class="glyphicon glyphicon-certificate"></span>
        <h6>商城管理</h6>
        <h6>> 系列/风格/属性管理 </h6>
    </div>

    <!--内容-->
    <div class="style_content">
        <!--选项卡-->
        <div class="allstyle_tabtitle">
            <span id="series_mag" ng-click="changeToseries()" ng-class="{clickstyle:showseries}">系列管理</span>
            <span id="style_mag" ng-click="changeTostyle()" ng-class="{clickstyle:showstyle}">风格管理</span>
            <span id="attr_mag" ng-click="changeToattr()" ng-class="{clickstyle:showattr}">属性管理</span>
        </div>

        <!--系列管理-->
        <div ng-if="showseries==true" class="series_mag">
            <!--按钮组-->
            <div class="series_btn">
            <div class="series_btn">
                <button ui-sref="add_series({list:series_arr})" ng-if="series_arr.length!=10">
                    <span class="glyphicon glyphicon-plus"></span>
                    <span>添加</span>
                </button>
                <button ui-sref="choose_series">选择系列</button>
            </div>

            <!--系列管理Table内容-->
            <div class="series_mag_table">
                <table>
                    <tr class="th">
                        <td width="224">系列名称</td>
                        <td width="270">创建时间
                            <img ng-click="ser_time_sort(0)" ng-if="ser_time_sort_on_flag" src="pages/mall_manage/style_manage/style_index/images/arrow_up.png" alt="">
                            <img ng-click="ser_time_sort(1)" ng-if="ser_time_sort_down_flag" src="pages/mall_manage/style_manage/style_index/images/arrow_down.png" alt="">
                        </td>
                        <td width="224">状态</td>
                        <td width="224">详情</td>
                        <td>操作</td>
                    </tr>

                    <tr ng-repeat="item in series_arr">
                        <td>{{item.series}}</td>
                        <td>{{item.creation_time}}</td>
                        <td class="color_red" ng-if="item.status=='0'">关闭</td>
                        <td class="color_skyblue" ng-if="item.status=='1'">启动中</td>
                        <td class="color_blue" ui-sref="series_detail({item:item,ser_arr:series_arr,index:$index})">编辑</td>
                        <td class="color_blue" ng-if="item.status=='0'" data-toggle="modal" data-target="#open_modal" ng-click="open_status(item)">开启</td>
                        <td class="color_blue" ng-if="item.status=='1'" data-toggle="modal" data-target="#close_modal" ng-click="close_status(item)">关闭</td>
                    </tr>
                </table>
            </div>
        </div>
        </div>

        <!--风格管理-->
        <div ng-if="showstyle==true" class="series_mag">
            <!--按钮组-->
            <div class="series_btn">
                <button ui-sref="add_style({style_arr:style_arr})">
                    <span class="glyphicon glyphicon-plus"></span>
                    <span>添加</span>
                </button>
                <button ui-sref="choose_style">选择风格</button>
            </div>

            <!--风格管理Table内容-->
            <div class="series_mag_table">
                <table>
                    <tr class="th">
                        <td width="224">风格名称</td>
                        <td width="270">创建时间
                            <img ng-click="style_time_sort(0)" ng-if="style_time_sort_on_flag" src="pages/mall_manage/style_manage/style_index/images/arrow_up.png" alt="">
                            <img ng-click="style_time_sort(1)" ng-if="style_time_sort_down_flag" src="pages/mall_manage/style_manage/style_index/images/arrow_down.png" alt="">
                        </td>
                        <td width="224">状态</td>
                        <td width="224">详情</td>
                        <td>操作</td>
                    </tr>

                    <tr ng-repeat="style_item in style_arr">
                        <td>{{style_item.style}}</td>
                        <td>{{style_item.creation_time}}</td>
                        <td class="color_red" ng-if="style_item.status=='0'">关闭</td>
                        <td class="color_skyblue" ng-if="style_item.status=='1'">启用中</td>
                        <td class="color_blue" ui-sref="style_detail({style_item:style_item})">编辑</td>
                        <td class="color_blue" ng-if="style_item.status=='0'" ng-click="style_open(style_item)" data-toggle="modal" data-target="#style_open_modal">开启</td>
                        <td class="color_blue" ng-if="style_item.status=='1'" ng-click="style_close(style_item)" data-toggle="modal" data-target="#style_close_modal">关闭</td>
                    </tr>
                </table>
                <!--分页开始-->
                <ul class="pages">
                    <li ng-click="style_Previous()">上一页</li>  <!-- ng-click="choosePage(page)"  ng-class="{active:isActivePage(page)}"-->
                    <li class="pagenum" ng-repeat="page in style_history_list" ng-click="style_choosePage(page)" ng-class="{active:isActivePage(page)}">{{page}}</li>
                    <!--<li id="omit" ng-show="allpages>5">...</li>-->
                    <!--<li ng-if="allpages>5" ng-click="choosePage(allpages)" ng-class="{active:isActivePage(allpages)}">{{allpages}}</li>-->
                    <li ng-click="style_Next()">下一页</li>
                    <li class="jumpto"><input type="text" ng-model="topage"></li>
                    <li ng-click="style_choosePage(topage)">跳转</li>
                </ul>
                <!--分页结束-->
            </div>
        </div>

        <!--属性管理-->
        <div ng-if="showattr==true" class="series_mag">
            <!--属性管理按钮组-->
            <div class="attr_btns">
                <span>分类选择</span>
                <!--/*分类选择一级下拉框*/-->
                <select name=""  ng-model="firstselect" ng-options="item.id as item.title for item in firstclass" ng-change="subClass(firstselect)"></select>
                <!--/*分类选择二级菜单*/-->
                <select name=""  ng-show="firstselect=='0'?false:true" ng-options="item.id as item.title for item in secondclass" ng-model="secselect"></select>

                <button ng-click="attrselect()">查询</button>
            </div>

            <!--属性管理表格-->
            <div class="series_mag_table">
                <table>
                    <tr class="th">
                        <td width="150">所属分类</td>
                        <td width="148">分类名称</td>
                        <td width="211">最后操作时间
                            <img src="pages/mall_manage/style_manage/style_index/images/arrow_up.png" alt="" ng-show="handleascorder" ng-click="handleDesorder()">
                            <img src="pages/mall_manage/style_manage/style_index/images/arrow_down.png" alt="" ng-show="handledesorder" ng-click="handleAsorder()">
                        </td>
                        <td width="217">最后操作账号</td>
                        <td width="217">属性个数</td>
                        <td>详情</td>
                    </tr>

                    <tr ng-repeat="item in proptable">
                        <td>{{item.parent_title}}</td>
                        <td>{{item.title}}</td>
                        <td>{{item.attr_op_time}}</td>
                        <td>{{item.attr_op_username}}</td>
                        <td>{{item.attr_number}}</td>
                        <td class="color_blue" ui-sref="edit_attribute({titles:item.titles,propid:item.id,propattrs:item.attrs})">编辑</td>
                    </tr>
                </table>
            </div>

        </div>




        <!--系列开启 模态框-->
        <div class="modal fade" id="open_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>是否确认开启</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="open_btn_ok()">确认</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>
        <!--系列关闭模态框-->
        <div class="modal fade" id="close_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>是否确认关闭</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="close_btn_ok()" >确认</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>


        <!--风格开启 模态框-->
        <div class="modal fade" id="style_open_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>是否确认开启</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="style_open_btn_ok()">确认</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>
        <!--风格关闭模态框-->
        <div class="modal fade" id="style_close_modal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">提示</h4>
                    </div>
                    <div class="modal-body">
                        <p>是否确认关闭</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="style_close_btn_ok()" >确认</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>

